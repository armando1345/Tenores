<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tenores</title>
  <meta name="description" content="El curso que te convertirá en un excelente miembro de este equipo" />
  <link rel="icon" type="image/svg+xml" href="https://res.cloudinary.com/dcwx23x5o/image/upload/v1760049941/logo_tenores_oeotg5.svg" />
  <style>
    :root{--bg:#0a0a0a;--fg:#ffffff;--fg-muted:#dfe4ea;--card:#111213;--card-border:#1b1d1f;--accent:#0ffc7e;--accent-ink:#06170f;--radius-xl:28px;--radius-lg:20px;--shadow-1:0 10px 30px rgba(0,0,0,.35);--container:1080px}
    *,*::before,*::after{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--fg);font-family:Futura,'Futura PT','Avenir Next',Avenir,'Trebuchet MS',system-ui,-apple-system,'Segoe UI',Roboto,Ubuntu,'Helvetica Neue',Arial,sans-serif;line-height:1.35}
    a,a:visited{color:var(--fg);text-decoration:none}
    [hidden]{display:none!important}
    .sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
    .container{width:100%;max-width:var(--container);margin:0 auto;padding:32px 20px 52px}
    header{display:grid;place-items:center;gap:18px;padding-top:28px}
    .logo-wrap{width:108px;height:108px;border-radius:50%;overflow:hidden;position:relative;box-shadow:0 0 40px rgba(15,252,126,.4),0 0 80px rgba(15,252,126,.2);background:radial-gradient(circle at 50% 50%,rgba(15,252,126,.15),transparent 70%),#0f0f0f;transition:box-shadow .4s ease,transform .4s ease}
    .logo-wrap:hover{box-shadow:0 0 60px rgba(15,252,126,.6),0 0 120px rgba(15,252,126,.4);transform:scale(1.03)}
    .logo-wrap::after{content:"";position:absolute;inset:-10px;border-radius:50%;background:radial-gradient(circle,rgba(15,252,126,.4),transparent 70%);z-index:-1;filter:blur(18px)}
    .logo-wrap img{width:100%;height:100%;object-fit:cover;border-radius:50%}
    h1.site-title{margin:0;font-weight:900;letter-spacing:.1em;text-transform:uppercase;font-size:clamp(28px,2.6vw + 8px,46px)}
    .accent-bar{width:112px;height:3px;background:var(--accent);border-radius:999px;margin:6px auto 8px}
    .subtitle{color:#b8bec4;font-size:15px;opacity:.9;text-align:center;max-width:620px}
    main{margin-top:34px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:18px;align-items:start}
    .card{background:linear-gradient(180deg,#121314 0%,#0f1011 100%);border:1px solid var(--card-border);border-radius:var(--radius-xl);box-shadow:var(--shadow-1);position:relative;overflow:hidden;transition:transform .25s ease,box-shadow .25s ease,border-color .25s ease}
    .card:hover{transform:translateY(-2px);border-color:#222527;box-shadow:0 16px 40px rgba(0,0,0,.45)}
    .card:active{transform:translateY(0)}
    .card.active{border-color:rgba(15,252,126,.6);box-shadow:0 0 0 2px rgba(15,252,126,.35),var(--shadow-1)}
    .card-inner{aspect-ratio:16/10;position:relative;display:grid;place-items:center}
    .card-inner::before{content:"";position:absolute;inset:0;opacity:.06;filter:grayscale(1);background:center/58% no-repeat url('https://res.cloudinary.com/dcwx23x5o/image/upload/v1760049941/logo_tenores_oeotg5.svg')}
    .card-title{z-index:1;padding:10px 16px;border-radius:999px;background:rgba(0,0,0,.55);border:1px solid rgba(255,255,255,.08);font-weight:800;letter-spacing:.06em;text-transform:uppercase;color:#fff;position:relative;overflow:hidden;white-space:nowrap;max-width:88%;display:inline-block;text-overflow:ellipsis}
    .card-title::after{content:"";position:absolute;top:0;left:-120%;width:120%;height:100%;background:linear-gradient(100deg,transparent 40%,rgba(255,255,255,.25),transparent 60%);transform:skewX(-20deg);transition:transform .6s ease}
    .card:hover .card-title::after{transform:translateX(220%) skewX(-20deg)}
    #song-view[hidden],#home[hidden]{display:none}
    .back{display:inline-flex;gap:.6ch;align-items:center;margin-bottom:16px;padding:8px 12px;border-radius:999px;border:1px solid #1f2123;background:#0f1112}
    .song-title{margin:0 0 6px;font-size:clamp(22px,2.2vw + 6px,32px);font-weight:900}
    .song-meta{color:#b8bec4;font-size:14px;margin-bottom:18px}
    .audios-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:16px}
    .audio-card{background:linear-gradient(180deg,#141516 0%,#0f1011 100%);border:1px solid var(--card-border);border-radius:var(--radius-lg);padding:16px;box-shadow:var(--shadow-1)}
    .audio-card h3{margin:0 0 10px;font-size:14px;letter-spacing:.08em;text-transform:uppercase;color:var(--fg-muted)}
    .audio-card audio{width:100%;outline:none;margin-bottom:12px}
    .btn-row{display:flex;gap:10px;flex-wrap:wrap}
    .btn{position:relative;display:inline-flex;align-items:center;justify-content:center;gap:.6ch;padding:10px 14px;border-radius:999px;border:1px solid #242628;background:#0f1112;color:#fff;transition:transform .18s ease,box-shadow .18s ease,border-color .18s ease,color .18s ease}
    .btn:hover{transform:translateY(-1px);box-shadow:0 0 0 3px rgba(15,252,126,.12);border-color:var(--accent)}
    .btn:active{transform:translateY(0)}
    .btn[aria-disabled="true"]{opacity:.45;pointer-events:none}
    .btn svg,.mini-btn svg{width:1rem;height:1rem;display:block}
    .btn .label{white-space:nowrap}
    .btn.is-loading .label{opacity:0}
    .btn.is-loading::after{content:"";position:absolute;width:16px;height:16px;border-radius:50%;border:2px solid rgba(255,255,255,.35);border-top-color:#fff;animation:spin 1s linear infinite}
    @keyframes spin{to{transform:rotate(360deg)}}
    .mini{position:fixed;left:12px;right:12px;bottom:calc(12px + env(safe-area-inset-bottom));z-index:50;background:#0f1112;border:1px solid #242628;border-radius:16px;box-shadow:var(--shadow-1);display:flex;align-items:center;gap:12px;padding:10px 12px;transition:transform .25s ease,opacity .25s ease}
    .mini--hidden{transform:translateY(150%);opacity:.2;pointer-events:none}
    .mini-btn{width:40px;height:40px;border-radius:999px;border:1px solid #242628;background:#111314;color:#fff;display:grid;place-items:center}
    .mini-meta{min-width:0;cursor:pointer}
    .mini-title{font-weight:800;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .mini-sub{font-size:12px;color:#b8bec4}
    .mini-bar{flex:1;height:8px;background:#1b1d1f;border-radius:999px;overflow:hidden;cursor:pointer;touch-action:none}
    .mini-prog{width:0%;height:100%;background:var(--accent)}
    @media (min-width:840px){.mini{left:24px;right:auto;width:420px}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo-wrap"><img src="https://res.cloudinary.com/dcwx23x5o/image/upload/v1760049941/logo_tenores_oeotg5.svg" alt="Logo Tenores" /></div>
      <h1 class="site-title">Tenores</h1>
      <div class="accent-bar"></div>
      <p class="subtitle">El curso que te convertirá en un excelente miembro de este equipo</p>
    </header>
    <main>
      <section id="home" aria-labelledby="canciones-titulo">
        <h2 id="canciones-titulo" class="sr-only">Canciones del coro navideño</h2>
        <div class="grid">
          <figure><a class="card" href="#fum" aria-label="Fum Fum Fum" data-song="fum"><div class="card-inner"><span class="card-title">Fum Fum Fum</span></div></a></figure>
          <figure><a class="card" href="#adeste" aria-label="Adeste Fideles" data-song="adeste"><div class="card-inner"><span class="card-title">Adeste Fideles</span></div></a></figure>
          <figure><a class="card" href="#dona" aria-label="Dona Nobis Pacem" data-song="dona"><div class="card-inner"><span class="card-title">Dona Nobis Pacem</span></div></a></figure>
          <figure><a class="card" href="#kling" aria-label="Kling Glöckchen, klingelingeling" data-song="kling"><div class="card-inner"><span class="card-title">Kling Glöckchen</span></div></a></figure>
        </div>
      </section>
      <section id="song-view" hidden>
        <a class="back" href="#">← Volver</a>
        <h2 class="song-title" id="song-title">Título</h2>
        <p class="song-meta" id="song-meta">Tenores • Curso oficial</p>
        <div class="audios-grid">
          <article class="audio-card">
            <h3>Explicación</h3>
            <audio id="audio-explain" controls preload="none"></audio>
            <div class="btn-row">
              <a id="dl-explain" class="btn" href="#" download>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 3v12"/><path d="m7 11 5 5 5-5"/><path d="M5 21h14"/></svg>
                <span class="label" id="lbl-explain">Descargar</span>
              </a>
            </div>
          </article>
          <article class="audio-card">
            <h3>Canción</h3>
            <audio id="audio-track" controls preload="none"></audio>
            <div class="btn-row">
              <a id="dl-track" class="btn" href="#" download>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><path d="M12 3v12"/><path d="m7 11 5 5 5-5"/><path d="M5 21h14"/></svg>
                <span class="label" id="lbl-track">Descargar</span>
              </a>
            </div>
          </article>
        </div>
      </section>
    </main>
  </div>
  <div id="mini" class="mini" hidden>
    <button id="mini-toggle" class="mini-btn" aria-label="Reproducir"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polygon points="8,5 19,12 8,19 8,5"></polygon></svg></button>
    <div id="mini-meta" class="mini-meta" title="Abrir canción"><div id="mini-title" class="mini-title">—</div><div id="mini-sub" class="mini-sub">—</div></div>
    <div id="mini-bar" class="mini-bar" aria-label="Barra de progreso" role="progressbar" aria-valuemin="0" aria-valuemax="100"><div id="mini-prog" class="mini-prog"></div></div>
    <button id="mini-close" class="mini-btn" aria-label="Detener y cerrar">✕</button>
  </div>
  <script>
    const SONGS={fum:{title:'Fum Fum Fum',explain:'https://res.cloudinary.com/dcwx23x5o/video/upload/v1760051384/fum_fum_fum_explicacion_hcsfzy.mp3',track:'https://res.cloudinary.com/dcwx23x5o/video/upload/v1760051700/fum_fum_fum_cancion_c7zzyg.wav'},adeste:{title:'Adeste Fideles',explain:'https://res.cloudinary.com/dcwx23x5o/video/upload/v1760051808/adeste_explicacion_cap0yk.mp3',track:'https://res.cloudinary.com/dcwx23x5o/video/upload/v1760051838/adeste_cancion_kefxux.wav'},dona:{title:'Dona Nobis Pacem',explain:'https://res.cloudinary.com/dcwx23x5o/video/upload/v1760054204/dona_nobis_pacem_explicacion_eeqefa.mp3',track:'https://res.cloudinary.com/dcwx23x5o/video/upload/v1760054240/dona_nobis_pacem___cancion_hsep4p.wav'},kling:{title:'Kling Glöckchen, klingelingeling',explain:'',track:''}};

    const $home=document.getElementById('home');
    const $songView=document.getElementById('song-view');
    const $title=document.getElementById('song-title');
    const $meta=document.getElementById('song-meta');
    const $exp=document.getElementById('audio-explain');
    const $trk=document.getElementById('audio-track');
    const $dlExp=document.getElementById('dl-explain');
    const $dlTrk=document.getElementById('dl-track');
    const $lblExp=document.getElementById('lbl-explain');
    const $lblTrk=document.getElementById('lbl-track');

    const $mini=document.getElementById('mini');
    const $miniToggle=document.getElementById('mini-toggle');
    const $miniClose=document.getElementById('mini-close');
    const $miniTitle=document.getElementById('mini-title');
    const $miniSub=document.getElementById('mini-sub');
    const $miniBar=document.getElementById('mini-bar');
    const $miniProg=document.getElementById('mini-prog');
    const $miniMeta=document.getElementById('mini-meta');

    let currentSongId=null;let currentAudio=null;let currentLabel='';

    function setActiveCard(id){document.querySelectorAll('[data-song]').forEach(a=>{a.classList.toggle('active',a.getAttribute('data-song')===id);if(a.getAttribute('data-song')===id){a.setAttribute('aria-current','page')}else{a.removeAttribute('aria-current')}})}

    function setLoading(btn,on,labelEl){if(on){btn.classList.add('is-loading');btn.setAttribute('aria-disabled','true');if(labelEl)labelEl.textContent='Descargando…'}else{btn.classList.remove('is-loading');btn.setAttribute('aria-disabled','false')}}

    function renderHome(){$home.hidden=false;$songView.hidden=true;setActiveCard('');[$exp,$trk].forEach(a=>{if(!currentAudio||a!==currentAudio){try{a.pause();a.currentTime=0}catch(_){} }});if(!currentAudio||currentAudio.paused||currentAudio.ended)hideMini();document.title='Tenores'}

    function extFromUrl(url){try{const u=new URL(url);const p=u.pathname;const i=p.lastIndexOf('.');return i!==-1?p.slice(i+1).toUpperCase():'MP3'}catch{const m=url.match(/\.([a-z0-9]+)(?:$|\?)/i);return m?m[1].toUpperCase():'MP3'}}

    function renderSong(id){const song=SONGS[id];if(!song)return renderHome();currentSongId=id;$title.textContent=song.title;$meta.textContent='Tenores • Curso oficial';$exp.src=song.explain||'';$trk.src=song.track||'';const hasExplain=Boolean(song.explain);const hasTrack=Boolean(song.track);$dlExp.setAttribute('aria-disabled',String(!hasExplain));$dlTrk.setAttribute('aria-disabled',String(!hasTrack));$lblExp.textContent=hasExplain?`Descargar ${extFromUrl(song.explain)}`:'Descargar';$lblTrk.textContent=hasTrack?`Descargar ${extFromUrl(song.track)}`:'Descargar';$home.hidden=true;$songView.hidden=false;setActiveCard(id);document.title=`Tenores – ${song.title}`;window.scrollTo({top:0,behavior:'smooth'})}

    function router(){const h=(location.hash||'').replace('#','').trim();if(!h)return renderHome();renderSong(h)}

    function fileExt(url){try{const u=new URL(url);const p=u.pathname;const i=p.lastIndexOf('.');return i!==-1?p.slice(i):'.mp3'}catch{const m=url.match(/\.([a-z0-9]+)(?:$|\?)/i);return m?'.'+m[1]:'.mp3'}}
    function cleanName(s){return s.replace(/[^a-z0-9\- _\.]/gi,'_')}
    async function forceDownload(url,filename,btn,labelEl){try{setLoading(btn,true,labelEl);const res=await fetch(url,{mode:'cors'});const blob=await res.blob();const link=document.createElement('a');link.href=URL.createObjectURL(blob);link.download=filename;document.body.appendChild(link);link.click();URL.revokeObjectURL(link.href);link.remove()}catch(e){window.open(url,'_blank')}finally{setLoading(btn,false,labelEl);if(labelEl)labelEl.textContent=labelEl.dataset.default||'Descargar'}}

    $lblExp.dataset.default=$lblExp.textContent;$lblTrk.dataset.default=$lblTrk.textContent;
    $dlExp.addEventListener('click',e=>{e.preventDefault();if(!currentSongId)return;const s=SONGS[currentSongId];if(!s.explain)return;const ext=fileExt(s.explain);forceDownload(s.explain,cleanName(`${s.title} - explicacion${ext}`),$dlExp,$lblExp)});
    $dlTrk.addEventListener('click',e=>{e.preventDefault();if(!currentSongId)return;const s=SONGS[currentSongId];if(!s.track)return;const ext=fileExt(s.track);forceDownload(s.track,cleanName(`${s.title} - cancion${ext}`),$dlTrk,$lblTrk)});

    function showMini(){ $mini.hidden=false; }
    function hideMini(){ $mini.hidden=true; $mini.classList.remove('mini--hidden'); $miniProg.style.width='0%'; currentAudio=null; }

    function bindToMini(audio,label){currentAudio=audio;currentLabel=label;$miniTitle.textContent=SONGS[currentSongId]?.title||'—';$miniSub.textContent=label;showMini();updateMini()}
    function iconPlay(){return `<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true"><polygon points="8,5 19,12 8,19 8,5"></polygon></svg>`}
    function iconPause(){return `<svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" aria-hidden=\"true\"><line x1=\"9\" y1=\"5\" x2=\"9\" y2=\"19\"/><line x1=\"15\" y1=\"5\" x2=\"15\" y2=\"19\"/></svg>`}
    function updateMini(){
      const isPaused = !currentAudio || currentAudio.paused;
      $miniToggle.innerHTML = isPaused ? iconPlay() : iconPause();
      $miniToggle.setAttribute('aria-label', isPaused ? 'Reproducir' : 'Pausar');
      if(!currentAudio || !currentAudio.duration){ $miniProg.style.width='0%'; return; }
      const pct = (currentAudio.currentTime / currentAudio.duration) * 100;
      $miniProg.style.width = `${pct}%`;
      $miniBar.setAttribute('aria-valuenow', String(Math.round(pct)));
    }const pct=currentAudio.currentTime/currentAudio.duration*100;$miniProg.style.width=`${pct}%`;$miniBar.setAttribute('aria-valuenow',String(Math.round(pct)));$miniToggle.textContent=currentAudio.paused?'▶':'⏸'}

    [$exp,$trk].forEach((el,idx)=>{const label=idx===0?'Explicación':'Canción';el.addEventListener('play',()=>{bindToMini(el,label)});el.addEventListener('pause',()=>{updateMini();if($exp.paused&&$trk.paused)hideMini()});el.addEventListener('timeupdate',updateMini);el.addEventListener('ended',()=>{updateMini();hideMini()})});

    $miniToggle.addEventListener('click',()=>{if(!currentAudio)return;currentAudio.paused?currentAudio.play():currentAudio.pause();updateMini()});
    $miniClose.addEventListener('click',()=>{if(currentAudio){try{currentAudio.pause()}catch(_){}}hideMini()});

    $miniBar.addEventListener('click',e=>{if(!currentAudio||!currentAudio.duration)return;const rect=$miniBar.getBoundingClientRect();const pct=Math.min(1,Math.max(0,(e.clientX-rect.left)/rect.width));currentAudio.currentTime=pct*currentAudio.duration});

    let scrubbing=false;
    function pointX(ev){return ev.touches?ev.touches[0].clientX:ev.clientX}
    function scrubTo(ev){if(!currentAudio||!currentAudio.duration)return;const rect=$miniBar.getBoundingClientRect();const pct=Math.min(1,Math.max(0,(pointX(ev)-rect.left)/rect.width));currentAudio.currentTime=pct*currentAudio.duration;updateMini()}
    $miniBar.addEventListener('mousedown',ev=>{scrubbing=true;scrubTo(ev)});
    window.addEventListener('mousemove',ev=>{if(scrubbing)scrubTo(ev)});
    window.addEventListener('mouseup',()=>{scrubbing=false});
    $miniBar.addEventListener('touchstart',ev=>{scrubbing=true;scrubTo(ev)},{passive:true});
    window.addEventListener('touchmove',ev=>{if(scrubbing)scrubTo(ev)},{passive:true});
    window.addEventListener('touchend',()=>{scrubbing=false});

    $miniMeta.addEventListener('click',()=>{if(currentSongId){location.hash=currentSongId}});

    let lastY=window.scrollY;
    window.addEventListener('scroll',()=>{
      if($mini.hidden) return;
      const y=window.scrollY;
      if(y>lastY+8){ $mini.classList.add('mini--hidden'); }
      else if(y<lastY-8){ $mini.classList.remove('mini--hidden'); }
      lastY=y;
    },{passive:true});

    document.addEventListener('keydown',e=>{const tag=(e.target&&e.target.tagName)||'';if(tag==='INPUT'||tag==='TEXTAREA'||e.altKey||e.ctrlKey||e.metaKey)return;if(e.code==='Space'){e.preventDefault();const target=currentAudio||(!$songView.hidden?($trk.src?$trk:$exp):null);if(target){target.paused?target.play():target.pause()}}else if(e.key==='ArrowLeft'){e.preventDefault();if(currentAudio)currentAudio.currentTime=Math.max(0,currentAudio.currentTime-5)}else if(e.key==='ArrowRight'){e.preventDefault();if(currentAudio&&currentAudio.duration)currentAudio.currentTime=Math.min(currentAudio.duration,currentAudio.currentTime+5)}});

    window.addEventListener('hashchange',router);
    window.addEventListener('DOMContentLoaded',()=>{hideMini();router()});
  </script>
</body>
</html>
